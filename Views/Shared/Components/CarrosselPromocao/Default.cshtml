@model List<Ecomerce.Models.Produto>
@using System.Globalization
@using Humanizer

@if (Model != null && Model.Any())
{
    <style>
        .carousel-wrapper {
            position: relative;
            width: 100%;
        }

        /* √Årea que cont√©m os produtos */
        .carousel-track {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            gap: 1rem;
            padding: 10px 0;
        }

        .carousel-track::-webkit-scrollbar {
            display: none;
        }

        /* Cada card de produto */
        .carousel-item-card {
            flex: 0 0 auto;
            width: 85%;
            max-width: 500px;
        }

        /* Responsivo */
        @@media (min-width: 576px) {
            .carousel-item-card { width: 48%; }
        }

        @@media (min-width: 992px) {
            .carousel-item-card { width: 23%; }
        }

        /* Bot√µes laterais (desktop) */
        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #fff;
            border: 1px solid rgba(0, 0, 0, 0.1);
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
            cursor: pointer;
        }

        .carousel-nav svg {
            width: 18px;
            height: 18px;
        }

        .carousel-prev { left: -20px; }
        .carousel-next { right: -20px; }

        @@media (min-width: 992px) {
            .carousel-nav { display: flex; }
        }

        /* Bot√µes inferiores no mobile */
        .carousel-mobile-nav {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 10px;
        }

        .carousel-mobile-nav button {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #fff;
            border: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }

        @@media (min-width: 992px) {
            .carousel-mobile-nav { display: none; }
        }
    </style>

    <h2 class="text-center my-4">üî• Produtos em Destaque</h2>

    <div class="carousel-wrapper">
        <!-- Bot√µes laterais (desktop) -->
        <button class="carousel-nav carousel-prev" id="btnPrev">
            <svg viewBox="0 0 20 20" fill="none"><path d="M12 4L6 10l6 6" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>
        </button>

        <button class="carousel-nav carousel-next" id="btnNext">
            <svg viewBox="0 0 20 20" fill="none"><path d="M8 16l6-6-6-6" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>
        </button>

        <!-- Faixa rol√°vel -->
        <div class="carousel-track" id="carouselTrack">
            @foreach (var produto in Model)
            {
                <div class="carousel-item-card">
                    @await Html.PartialAsync("_CardProduto", produto)
                </div>
            }
        </div>

        <!-- Navega√ß√£o inferior (mobile) -->
        <div class="carousel-mobile-nav">
            <button id="btnPrevMobile">
                <svg viewBox="0 0 20 20" fill="none"><path d="M12 4L6 10l6 6" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>
            </button>
            <button id="btnNextMobile">
                <svg viewBox="0 0 20 20" fill="none"><path d="M8 16l6-6-6-6" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>
            </button>
        </div>
    </div>

    <script>
        (function () {
            const track = document.getElementById('carouselTrack');
            const prevButtons = [document.getElementById('btnPrev'), document.getElementById('btnPrevMobile')];
            const nextButtons = [document.getElementById('btnNext'), document.getElementById('btnNextMobile')];

            function scroll(direction) {
                const offset = track.clientWidth * 0.8;
                track.scrollBy({
                    left: direction === 'next' ? offset : -offset,
                    behavior: 'smooth'
                });
            }

            prevButtons.forEach(btn => btn?.addEventListener('click', () => scroll('prev')));
            nextButtons.forEach(btn => btn?.addEventListener('click', () => scroll('next')));
        })();
    </script>
}
else
{
    <p class="text-center text-muted mt-4">Nenhum produto dispon√≠vel no momento.</p>
}
